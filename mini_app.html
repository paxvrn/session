<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device Selector</title>
    <!-- Telegram Web App script -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #121212;
            color: #E0E0E0;
            transition: background-color 0.3s, color 0.3s;
        }
        .container {
            background-color: #1E1E1E;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            border: 1px solid #333;
        }
        select, button, .display-box {
            background-color: #2D2D2D;
            border: 1px solid #444;
            color: #E0E0E0;
            transition: all 0.2s ease-in-out;
        }
        select:focus, button:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.5);
            border-color: #3B82F6;
        }
        button:hover {
            background-color: #3B82F6;
            color: white;
        }
        .library-button.selected {
            background-color: #3B82F6;
            color: white;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <!-- Main Application Container -->
    <div class="container p-8 rounded-2xl w-full max-w-sm text-center">
        <h1 class="text-3xl font-bold mb-4 text-white">Device Selector</h1>
        
        <p class="mb-6 text-sm text-gray-400">
            Choose a device from the list or pick a random one.
        </p>
        
        <div id="step-1">
            <!-- Device Selection Dropdown -->
            <div class="mb-6">
                <select id="device-select" class="w-full p-3 rounded-xl focus:ring-2 cursor-pointer appearance-none">
                    <option value="" disabled selected>Select a device...</option>
                    <option value="Amazon Fire HD 10">Amazon Fire HD 10</option>
                    <option value="Amazon Fire HD 8">Amazon Fire HD 8</option>
                    <option value="Apple iPhone 11">Apple iPhone 11</option>
                    <option value="Apple iPhone 12">Apple iPhone 12</option>
                    <option value="Apple iPhone 13">Apple iPhone 13</option>
                    <option value="Apple iPhone 14">Apple iPhone 14</option>
                    <option value="Apple iPhone 15">Apple iPhone 15</option>
                    <option value="Apple iPhone 15 Plus">Apple iPhone 15 Plus</option>
                    <option value="Apple iPhone 15 Pro">Apple iPhone 15 Pro</option>
                    <option value="Apple iPhone 15 Pro Max">Apple iPhone 15 Pro Max</option>
                    <option value="Apple iPhone SE (2nd gen)">Apple iPhone SE (2nd gen)</option>
                    <option value="Apple iPad Pro 11-inch">Apple iPad Pro 11-inch</option>
                    <option value="Apple iPad Air">Apple iPad Air</option>
                    <option value="ASUS ROG Phone 6">ASUS ROG Phone 6</option>
                    <option value="ASUS Zenfone 9">ASUS Zenfone 9</option>
                    <option value="ASUS Zenfone 10">ASUS Zenfone 10</option>
                    <option value="Google Pixel 4a">Google Pixel 4a</option>
                    <option value="Google Pixel 5">Google Pixel 5</option>
                    <option value="Google Pixel 6">Google Pixel 6</option>
                    <option value="Google Pixel 6a">Google Pixel 6a</option>
                    <option value="Google Pixel 7">Google Pixel 7</option>
                    <option value="Google Pixel 7a">Google Pixel 7a</option>
                    <option value="Google Pixel 7 Pro">Google Pixel 7 Pro</option>
                    <option value="Google Pixel 8">Google Pixel 8</option>
                    <option value="Google Pixel 8 Pro">Google Pixel 8 Pro</option>
                    <option value="Google Pixel Fold">Google Pixel Fold</option>
                    <option value="HTC U23 Pro">HTC U23 Pro</option>
                    <option value="Huawei P50 Pro">Huawei P50 Pro</option>
                    <option value="Huawei Mate 50 Pro">Huawei Mate 50 Pro</option>
                    <option value="Lenovo Tab P11 Pro">Lenovo Tab P11 Pro</option>
                    <option value="LG G8X ThinQ">LG G8X ThinQ</option>
                    <option value="LG V60 ThinQ 5G">LG V60 ThinQ 5G</option>
                    <option value="Motorola Edge 40 Pro">Motorola Edge 40 Pro</option>
                    <option value="Motorola Moto G Stylus 5G">Motorola Moto G Stylus 5G</option>
                    <option value="Motorola Razr+">Motorola Razr+</option>
                    <option value="Nokia G400">Nokia G400</option>
                    <option value="Nokia X21 5G">Nokia X21 5G</option>
                    <option value="Nothing Phone (1)">Nothing Phone (1)</option>
                    <option value="Nothing Phone (2)">Nothing Phone (2)</option>
                    <option value="OnePlus 10 Pro">OnePlus 10 Pro</option>
                    <option value="OnePlus 11">OnePlus 11</option>
                    <option value="OnePlus 12">OnePlus 12</option>
                    <option value="OnePlus 12R">OnePlus 12R</option>
                    <option value="OnePlus Nord 2T">OnePlus Nord 2T</option>
                    <option value="OnePlus Nord CE 3 Lite">OnePlus Nord CE 3 Lite</option>
                    <option value="Oppo Find N3 Flip">Oppo Find N3 Flip</option>
                    <option value="Oppo Find X6 Pro">Oppo Find X6 Pro</option>
                    <option value="Oppo Reno10 Pro">Oppo Reno10 Pro</option>
                    <option value="Redmi Note 12 Pro">Redmi Note 12 Pro</option>
                    <option value="Redmi Note 13 Pro">Redmi Note 13 Pro</option>
                    <option value="Samsung Galaxy A53 5G">Samsung Galaxy A53 5G</option>
                    <option value="Samsung Galaxy A54 5G">Samsung Galaxy A54 5G</option>
                    <option value="Samsung Galaxy A73 5G">Samsung Galaxy A73 5G</option>
                    <option value="Samsung Galaxy S20">Samsung Galaxy S20</option>
                    <option value="Samsung Galaxy S21">Samsung Galaxy S21</option>
                    <option value="Samsung Galaxy S22">Samsung Galaxy S22</option>
                    <option value="Samsung Galaxy S23">Samsung Galaxy S23</option>
                    <option value="Samsung Galaxy S23 FE">Samsung Galaxy S23 FE</option>
                    <option value="Samsung Galaxy S23 Ultra">Samsung Galaxy S23 Ultra</option>
                    <option value="Samsung Galaxy S24">Samsung Galaxy S24</option>
                    <option value="Samsung Galaxy S24+">Samsung Galaxy S24+</option>
                    <option value="Samsung Galaxy S24 Ultra">Samsung Galaxy S24 Ultra</option>
                    <option value="Samsung Galaxy Z Flip4">Samsung Galaxy Z Flip4</option>
                    <option value="Samsung Galaxy Z Flip5">Samsung Galaxy Z Flip5</option>
                    <option value="Samsung Galaxy Z Fold4">Samsung Galaxy Z Fold4</option>
                    <option value="Samsung Galaxy Z Fold5">Samsung Galaxy Z Fold5</option>
                    <option value="Sony Xperia 1 IV">Sony Xperia 1 IV</option>
                    <option value="Sony Xperia 1 V">Sony Xperia 1 V</option>
                    <option value="Sony Xperia 5 IV">Sony Xperia 5 IV</option>
                    <option value="TCL Stylus 5G">TCL Stylus 5G</option>
                    <option value="TCL 40XL">TCL 40XL</option>
                    <option value="Vivo X90 Pro">Vivo X90 Pro</option>
                    <option value="Vivo X100 Pro">Vivo X100 Pro</option>
                    <option value="Xiaomi 12">Xiaomi 12</option>
                    <option value="Xiaomi 12S Ultra">Xiaomi 12S Ultra</option>
                    <option value="Xiaomi 13">Xiaomi 13</option>
                    <option value="Xiaomi 13 Ultra">Xiaomi 13 Ultra</option>
                    <option value="Xiaomi 14">Xiaomi 14</option>
                    <option value="Xiaomi 14 Ultra">Xiaomi 14 Ultra</option>
                    <option value="ZTE Axon 40 Ultra">ZTE Axon 40 Ultra</option>
                    <option value="ZTE Nubia RedMagic 8S Pro">ZTE Nubia RedMagic 8S Pro</option>
                </select>
            </div>
            <button id="random-button" class="w-full p-3 font-semibold rounded-xl mb-6">
                ðŸŽ² Pick Random Device
            </button>
            <button id="continue-button" class="w-full p-3 font-semibold rounded-xl mt-4 bg-blue-500 hover:bg-blue-600 transition-colors hidden" disabled>
                Continue
            </button>
        </div>
        
        <div id="step-2" class="hidden">
            <h2 class="text-xl font-semibold mb-2">Choose a Library:</h2>
            <div class="flex flex-col space-y-4">
                <button class="library-button p-3 rounded-xl font-semibold" data-library="Pyrogram">Pyrogram</button>
                <button class="library-button p-3 rounded-xl font-semibold" data-library="Telethon">Telethon</button>
            </div>
        
            <div class="mt-8">
                <h2 class="text-xl font-semibold mb-2">Current Selection:</h2>
                <div id="selection-summary" class="display-box p-4 rounded-xl text-left">
                    <p>Device: <span id="confirm-device" class="font-mono ml-2 text-gray-400">None</span></p>
                    <p>Library: <span id="confirm-library" class="font-mono ml-2 text-gray-400">None</span></p>
                </div>
                <button id="send-button" class="w-full p-3 font-semibold rounded-xl mt-4 bg-blue-500 hover:bg-blue-600 transition-colors hidden">
                    Send to Bot
                </button>
            </div>
        </div>
    </div>
    <script>
        const WebApp = Telegram.WebApp;
        WebApp.ready();

        const deviceSelect = document.getElementById('device-select');
        const randomButton = document.getElementById('random-button');
        const continueButton = document.getElementById('continue-button');
        const librarySection = document.getElementById('step-2');
        const deviceSection = document.getElementById('step-1');
        const confirmDeviceSpan = document.getElementById('confirm-device');
        const confirmLibrarySpan = document.getElementById('confirm-library');
        const sendButton = document.getElementById('send-button');
        const libraryButtons = document.querySelectorAll('.library-button');
        
        let selectedDevice = null;
        let selectedLibrary = null;

        const deviceList = Array.from(deviceSelect.options).map(option => option.value).filter(value => value !== "");

        const updateUI = () => {
            continueButton.disabled = !selectedDevice;
            confirmDeviceSpan.textContent = selectedDevice || 'None';
            confirmLibrarySpan.textContent = selectedLibrary || 'None';

            if (selectedDevice && selectedLibrary) {
                sendButton.classList.remove('hidden');
            } else {
                sendButton.classList.add('hidden');
            }
        };

        deviceSelect.addEventListener('change', (event) => {
            selectedDevice = event.target.value;
            updateUI();
        });

        randomButton.addEventListener('click', () => {
            const randomIndex = Math.floor(Math.random() * deviceList.length);
            selectedDevice = deviceList[randomIndex];
            deviceSelect.value = selectedDevice;
            updateUI();
        });

        continueButton.addEventListener('click', () => {
            if (selectedDevice) {
                deviceSection.classList.add('hidden');
                librarySection.classList.remove('hidden');
            }
        });

        libraryButtons.forEach(button => {
            button.addEventListener('click', () => {
                libraryButtons.forEach(btn => btn.classList.remove('selected'));
                button.classList.add('selected');
                selectedLibrary = button.dataset.library;
                updateUI();
            });
        });

        sendButton.addEventListener('click', () => {
            if (selectedDevice && selectedLibrary) {
                WebApp.sendData(JSON.stringify({
                    device: selectedDevice,
                    library: selectedLibrary
                }));
            }
        });
    </script>
</body>
</html>
